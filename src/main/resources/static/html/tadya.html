<!DOCTYPE html>

<html>
    <head>
        <title>Tadya</title>
        <meta charset="utf-8">
        <script type='text/javascript' src='https://www.bing.com/api/maps/mapcontrol?callback=GetMap&setMkt=tr-TR&setLang=tr&branch=release&key=AtEGXpWltd3FqxpW2NOpPSpz_YQb5XUTt1dwFLrQbtSEyvA1GwIo8TnARNadz3iS' async defer></script>
        <link rel="stylesheet" href="../css/style.css">
        <script type='text/javascript'>
            function GetMap() {
                //var xmlhttp = new XMLHttpRequest();
                //
                //xmlhttp.onreadystatechange = function() {
                //    if (this.readyState == 4 && this.status == 200) {
                //      // Parse the GeoJSON data
                //      var geojson = JSON.parse(this.responseText);
                //    
                //      // Convert the GeoJSON data to a Microsoft.Maps.Layer
                //      var layer = Microsoft.Maps.GeoJson.read(geojson);
                //    
                //      // Add the layer to the map
                //      map.layers.add(layer);
                //    }
                //};

                var map = new Microsoft.Maps.Map('#tadyaMap', {
                    credentials: 'AtEGXpWltd3FqxpW2NOpPSpz_YQb5XUTt1dwFLrQbtSEyvA1GwIo8TnARNadz3iS',
                    center: new Microsoft.Maps.Location(41.1267716, 29.109357),
                    mapTypeId: Microsoft.Maps.MapTypeId.road,
                    zoom: 14
                });

                //var center = map.getCenter();
                //var pushpin = new Microsoft.Maps.Pushpin(center, {
                //    title: 'enkaz altı',
                //    text: '2'
                //});
                //
                //map.entities.push(pushpin);

                //Microsoft.Maps.Events.addHandler(pushpin, 'mousedown', function () { highlight('pushpinMousedown'); });
                //Microsoft.Maps.Events.addHandler(pushpin, 'mouseout', function () { highlight('pushpinMouseout'); });
                //Microsoft.Maps.Events.addHandler(pushpin, 'mouseover', function () { highlight('pushpinMouseover'); });
                //Microsoft.Maps.Events.addHandler(pushpin, 'mouseup', function () { highlight('pushpinMouseup'); });
                //Microsoft.Maps.Events.addHandler(pushpin, 'click', function () { getInfo(pushpin) });


                //function getInfo(pushpin) {
                //    console.log("çalıştı");
                //    var pushpinInfoDiv = document.getElementById("info");
                //    var pushpinInfo = {
                //      location: pushpin.getLocation(),
                //      title: pushpin.getTitle(),
                //      text: pushpin.getText(),
                //      icon: pushpin.getIcon(),
                //      // Add any other properties you want to retrieve
                //    };
                //    pushpinInfoDiv.innerHTML = '<h3>' + pushpinInfo.title + '</h3>' +
                //    '<p>' + pushpinInfo.text + '</p>' +
                //    '<p>Latitude: ' + pushpinInfo.location.latitude + '</p>' +
                //    '<p>Longitude: ' + pushpinInfo.location.longitude +'</p>';
                //}

                Microsoft.Maps.loadModule('Microsoft.Maps.GeoJson', function () {
                    Microsoft.Maps.GeoJson.readFromUrl('../../data/beykozz.geojson',
                        function (beykoz) {
                            //Add the shape(s) to the map.
                            map.entities.push(beykoz);
                            //Microsoft.Maps.Events.addHandler(map, 'viewchangend', function () {
                               // if (map.getZoom() < 16) {
                                //    beykoz.setOptions({ visible: false });
                                //} else {
                                  //  beykoz.setOptions({ visible: true });
                                //}
                                //});
                        });
                });
            

            
                //document.addEventListener("DOMContentLoaded", function () {
                //    GetMap();
                //});
            
            }
        </script>
    </head>
    <body id="page2">
        <div id="tadyaMap"> </div>
    </body>
</html>