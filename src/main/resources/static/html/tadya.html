<!DOCTYPE html>

<html>
<head>
    <title>Tadya</title>
    <meta charset="utf-8">
    <script type='text/javascript' src='https://www.bing.com/api/maps/mapcontrol?callback=GetMap&setMkt=tr-TR&setLang=tr&branch=release&key=AtEGXpWltd3FqxpW2NOpPSpz_YQb5XUTt1dwFLrQbtSEyvA1GwIo8TnARNadz3iS' async defer></script>
    <link rel="stylesheet" href="../css/style.css">
    <script type='text/javascript'>
            function addClickHandlerToPolygons(polygons) {
                for (let i = 0; i < polygons.length; i++) {
                    Microsoft.Maps.Events.addHandler(polygons[i], 'click', function (e) {
                        // Show an empty infobox when a polygon is clicked
                        showInfobox(e.target);
                    });
                }
            }

            function showInfobox(polygon) {
                // Set the infobox options with the polygon location
                infobox.innerHTML = "<b>Type:</b> Building";
                infobox.style.display = 'block';
            }
            function GetMap() {

                var map = new Microsoft.Maps.Map('#tadyaMap', {
                    credentials: 'AtEGXpWltd3FqxpW2NOpPSpz_YQb5XUTt1dwFLrQbtSEyvA1GwIo8TnARNadz3iS',
                    center: new Microsoft.Maps.Location(41.1267716, 29.109357),
                    mapTypeId: Microsoft.Maps.MapTypeId.road,
                    zoom: 14
                });

                //Create an infobox at the center of the map but don't show it.
                infobox = document.getElementById('infobox');

                Microsoft.Maps.loadModule('Microsoft.Maps.GeoJson', function () {
                    Microsoft.Maps.GeoJson.readFromUrl('../../data/beykozz.geojson',
                        function (beykoz) {
                            //Add the shape(s) to the map.
                            map.entities.push(beykoz);

                            // Add a click event handler to each polygon
                            addClickHandlerToPolygons(beykoz);
                        });
                });
            }
        </script>
</head>
<body id="page2">
<div id="tadyaMap" style="width: 80vw; height: 80vh;"> </div>
<div id="infobox" style="display: none;"></div>
</body>
</html>
